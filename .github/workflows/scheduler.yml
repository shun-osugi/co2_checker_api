name: Scheduled Prediction Runner

# ワークフローが実行されるトリガー（きっかけ）を設定
on:
  # 1. スケジュール実行
  schedule:
    # cron式: 5分ごとに実行
    - cron: '*/5 * * * *'
  
  # 2. 手動実行
  # Actionsタブから手動で実行できるようにする
  workflow_dispatch:

# 実行するジョブ（仕事）を定義
jobs:
  # ジョブの名前（run-prediction）
  run-prediction:
    # 実行環境（最新のUbuntu）
    runs-on: ubuntu-latest
    
    # 実行するステップ（手順）
    steps:
      # 手順1: リポジトリのコードをチェックアウトする
      - name: Checkout repository code
        uses: actions/checkout@v4

      # 手順2: Python 3.10 をセットアップする
      - name: Setup Python 3.10
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      # 手順3: 必要なライブラリをインストールする
      - name: Install dependencies
        run: pip install -r requirements.txt

      # 手順4: 予測スクリプトを実行する
      - name: Run prediction script
        run: python run_prediction.py